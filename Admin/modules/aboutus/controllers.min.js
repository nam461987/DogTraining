"use strict";var app=angular.module("gcApp.controllers",[]);app.controller("UpdateController",function(n,t,i,r,u,f,e,o){n.btntext="Update";n.record={};var s=!1;n.uploadFiles=function(t,i){n.files=t;n.errFiles=i;angular.forEach(t,function(t){s=!1;t.upload=o.upload({url:"/Upload/MultipleUpload",data:{file:t}});t.upload.then(function(t){n.record.Avatar=t.data},function(t){console.log(t);t.status>0&&(n.errorMsg=t.status+": "+t.data)},function(i){console.log(i);t.progress=Math.min(100,parseInt(100*i.loaded/i.total));i.loaded==i.total&&(s=!0);n.uploadalert=s?"Done":"Uploading..."})})};n.fields=$.map(f.fields,function(n){return n.edit===!0?n:null});n.back=function(){u.path("/")};n.ok=function(){for(var t,i={},r=0;r<f.fields.length;r++)if(t=f.fields[r],typeof n.record[t.field]!="undefined")switch(t.type){case"date":i[t.field]=moment(n.record[t.field],"MM/DD/YYYY 00:00:00").format(f.defaultConfig.isoDateTimeFormat);break;case"datetime":i[t.field]=moment(n.record[t.field],"MM/DD/YYYY HH:mm:ss").format(f.defaultConfig.isoDateTimeFormat);break;case"time":i[t.field]=n.record[t.field].format(f.defaultConfig.timeFormat);break;case"select":i[t.field]=n.record[t.field].Value;break;case"select2":i[t.field]=n.record[t.field];break;case"textarea":i[t.field]=n.record[t.field]!=null&&n.record[t.field].length>0?n.record[t.field].replace(/\r?\n/g,"<br />"):"";break;default:i[t.field]=n.record[t.field]}n.applySuccess=e.UpdateAboutUs({obj:i},function(n){n.Result==1?alert("Changed success"):alert("Failed !!! Try again")})};n.options={};n.$watch(function(){return i.get("appReady")},function(n,t,r){var e,u,o,s;if(t===!1)for(e=0;e<f.fields.length;e++)if(u=f.fields[e],u.type=="select"||u.type=="select2"){r.options[u.field]=[];o="";switch(typeof u.option){case"object":o="options_"+u.field+"_array";break;default:o="options_"+u.field+"_"+u.option}s=i.get(o);typeof s!="undefined"&&(r.options[u.field]=s)}});e.GetAboutUsById({id:2},function(t){t.Result==1&&(n.record=t.Records)})});